<!doctype html>
<html>
  <head>
    <meta charset="utf8" />
    <title>Simple localForage example</title>
  </head>
  <body>
    <script src="../dist/localforage.js"></script>
    <script>
      /* global Promise:true, console:true */
      localforage.config({
        name: 'storage1',
        storeName: 'storagename1'
      });

      var localforage2 = localforage.createInstance({
          name: 'storage2',
          storeName: 'storagename2'
      });

      // var driverName = localforage.LOCALSTORAGE;

      Promise.resolve()
      // .then(function() {
      //   return Promise.all([
      //     localforage.ready(),
      //     localforage2.ready()
      //   ]);
      // })
      // .then(function() {
      //   return Promise.all([
      //     localforage.setDriver(driverName),
      //     localforage2.setDriver(driverName)
      //   ]);
      // })
      .then(function() {
        return Promise.all([
            localforage.clear(),
            localforage2.clear()
        ]);
      })
      .then(function() {
        return Promise.all([
          localforage.setItem('key', 'value1'),
          localforage2.setItem('key', 'value2'),
          localforage.setItem('key1', 'value1a'),
          localforage2.setItem('key2', 'value2a')
        ]);
      })
      .then(function() {
        console.log(localforage.driver(), localforage2.driver());

        localforage.getItem('key2').then(function(v){
          console.log('localforage  can' + ((v === null) ? '`t' : '(' + v + ')') + ' access key2');
        });

        localforage2.getItem('key1').then(function(v){
          console.log('localforage2 can' + ((v === null) ? '`t' : '(' + v + ')') + ' access key1');
        });

        localforage.getItem('key').then(function(v){
          console.log('localforage  "key" has value: ' + v);
        });

        localforage2.getItem('key').then(function(v){
          console.log('localforage2 "key" has value: ' + v);
        });
      });
    </script>
  </body>
</html>
